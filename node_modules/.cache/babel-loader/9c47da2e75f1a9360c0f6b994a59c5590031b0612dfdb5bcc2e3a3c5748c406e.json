{"ast":null,"code":"var _jsxFileName = \"/Users/nikitaognev/Desktop/honey/src/pages/SalesPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useData } from '../context/DataContext';\nimport { UserRole } from '../types';\nimport { ShoppingCart, Plus, Minus, Camera, CheckCircle, AlertTriangle, Gift, Calculator } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SalesPage = () => {\n  _s();\n  const {\n    user,\n    hasRole\n  } = useAuth();\n  const {\n    products,\n    inventory,\n    addSale,\n    promotions\n  } = useData();\n  const [currentSale, setCurrentSale] = useState({\n    items: [],\n    gifts: [],\n    paymentMethod: 'cash',\n    customerInfo: {},\n    photos: []\n  });\n  const [showCamera, setShowCamera] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Получаем товары доступные на текущей точке\n  const availableProducts = products.filter(product => {\n    const inv = inventory.find(i => i.locationId === (user === null || user === void 0 ? void 0 : user.locationId) && i.productId === product.id && i.currentStock > 0);\n    return inv && product.isActive;\n  });\n  const addToCart = productId => {\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n    const existingItem = currentSale.items.find(item => item.productId === productId);\n    if (existingItem) {\n      setCurrentSale(prev => ({\n        ...prev,\n        items: prev.items.map(item => item.productId === productId ? {\n          ...item,\n          quantity: item.quantity + 0.1,\n          totalPrice: (item.quantity + 0.1) * item.unitPrice\n        } : item)\n      }));\n    } else {\n      const newItem = {\n        productId,\n        quantity: 0.1,\n        unitPrice: product.basePrice,\n        totalPrice: product.basePrice * 0.1\n      };\n      setCurrentSale(prev => ({\n        ...prev,\n        items: [...prev.items, newItem]\n      }));\n    }\n  };\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) {\n      setCurrentSale(prev => ({\n        ...prev,\n        items: prev.items.filter(item => item.productId !== productId)\n      }));\n      return;\n    }\n    setCurrentSale(prev => ({\n      ...prev,\n      items: prev.items.map(item => item.productId === productId ? {\n        ...item,\n        quantity,\n        totalPrice: quantity * item.unitPrice\n      } : item)\n    }));\n  };\n  const calculateGifts = () => {\n    const newGifts = [];\n    promotions.forEach(promotion => {\n      if (!promotion.isActive) return;\n      promotion.conditions.forEach(condition => {\n        const item = currentSale.items.find(i => i.productId === condition.productId);\n        if (item && item.quantity >= condition.minQuantity) {\n          promotion.gifts.forEach(gift => {\n            newGifts.push({\n              productId: gift.productId,\n              quantity: gift.quantity,\n              reason: `Акция: ${promotion.name}`\n            });\n          });\n        }\n      });\n    });\n    setCurrentSale(prev => ({\n      ...prev,\n      gifts: newGifts\n    }));\n  };\n  const takePhoto = () => {\n    setShowCamera(true);\n    // В реальном приложении здесь будет работа с камерой\n    setTimeout(() => {\n      const mockPhoto = `photo_${Date.now()}.jpg`;\n      setCurrentSale(prev => ({\n        ...prev,\n        photos: [...prev.photos, mockPhoto]\n      }));\n      setShowCamera(false);\n    }, 1000);\n  };\n  const processSale = async () => {\n    if (currentSale.items.length === 0) return;\n    if (currentSale.photos.length === 0) {\n      alert('Необходимо сделать фото товара!');\n      return;\n    }\n    setIsProcessing(true);\n\n    // Имитация обработки\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    const totalAmount = currentSale.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const newSale = {\n      locationId: (user === null || user === void 0 ? void 0 : user.locationId) || 'loc1',\n      promoterId: (user === null || user === void 0 ? void 0 : user.id) || '',\n      items: currentSale.items,\n      totalAmount,\n      paymentMethod: currentSale.paymentMethod,\n      customerInfo: currentSale.customerInfo,\n      gifts: currentSale.gifts,\n      photos: currentSale.photos,\n      timestamp: new Date(),\n      isVerified: false,\n      notes: currentSale.notes\n    };\n    addSale(newSale);\n\n    // Сброс формы\n    setCurrentSale({\n      items: [],\n      gifts: [],\n      paymentMethod: 'cash',\n      customerInfo: {},\n      photos: []\n    });\n    setIsProcessing(false);\n    alert('Продажа успешно оформлена!');\n  };\n  const totalAmount = currentSale.items.reduce((sum, item) => sum + item.totalPrice, 0);\n  if (hasRole(UserRole.ADMIN)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-semibold mb-4\",\n          children: \"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440 \\u0432\\u0441\\u0435\\u0445 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card bg-gradient-to-r from-honey-500 to-honey-600 text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold mb-2\",\n        children: \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-honey-100\",\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B \\u0438 \\u043E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-3\",\n        children: availableProducts.map(product => {\n          const inv = inventory.find(i => i.locationId === (user === null || user === void 0 ? void 0 : user.locationId) && i.productId === product.id);\n          const isLowStock = inv && inv.currentStock <= inv.minStock;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-3 rounded-lg border-2 ${isLowStock ? 'border-red-200 bg-red-50' : 'border-gray-200 bg-white'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-medium text-sm\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this), isLowStock && /*#__PURE__*/_jsxDEV(AlertTriangle, {\n                className: \"w-4 h-4 text-red-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mb-2\",\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-semibold\",\n                children: [product.basePrice, \" \\u20BD/\", product.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500\",\n                children: [\"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A: \", inv === null || inv === void 0 ? void 0 : inv.currentStock.toFixed(1), \" \", product.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => addToCart(product.id),\n              className: \"w-full btn-honey text-sm py-1\",\n              children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, product.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), currentSale.items.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this), \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: currentSale.items.map(item => {\n          const product = products.find(p => p.id === item.productId);\n          if (!product) return null;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-medium\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: [item.unitPrice, \" \\u20BD/\", product.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateQuantity(item.productId, item.quantity - 0.1),\n                className: \"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Minus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center min-w-[60px]\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: [item.quantity.toFixed(1), \" \", product.unit]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [item.totalPrice.toFixed(0), \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateQuantity(item.productId, item.quantity + 0.1),\n                className: \"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 19\n            }, this)]\n          }, item.productId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), currentSale.gifts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-3 bg-green-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-medium text-green-800 mb-2 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Gift, {\n            className: \"w-4 h-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this), \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 15\n        }, this), currentSale.gifts.map((gift, index) => {\n          const product = products.find(p => p.id === gift.productId);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-green-700\",\n            children: [product === null || product === void 0 ? void 0 : product.name, \" - \", gift.quantity, \" \", product === null || product === void 0 ? void 0 : product.unit, \" (\", gift.reason, \")\"]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 19\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 pt-4 border-t border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg font-semibold\",\n            children: \"\\u0418\\u0442\\u043E\\u0433\\u043E:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl font-bold text-green-600\",\n            children: [totalAmount.toFixed(0), \" \\u20BD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), \"\\u0424\\u043E\\u0442\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430 (\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), currentSale.photos.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(Camera, {\n          className: \"w-12 h-12 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"\\u0421\\u0434\\u0435\\u043B\\u0430\\u0439\\u0442\\u0435 \\u0444\\u043E\\u0442\\u043E \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430 \\u0434\\u043B\\u044F \\u043A\\u043E\\u043D\\u0442\\u0440\\u043E\\u043B\\u044F \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: takePhoto,\n          className: \"btn-primary\",\n          children: \"\\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [currentSale.photos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5 text-green-500 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: [\"\\u0424\\u043E\\u0442\\u043E \", index + 1]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-500\",\n            children: photo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: takePhoto,\n          className: \"w-full btn-secondary\",\n          children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0435\\u0449\\u0435 \\u0444\\u043E\\u0442\\u043E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: \"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: ['cash', 'card', 'transfer'].map(method => /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"payment\",\n            value: method,\n            checked: currentSale.paymentMethod === method,\n            onChange: e => setCurrentSale(prev => ({\n              ...prev,\n              paymentMethod: e.target.value\n            })),\n            className: \"mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [method === 'cash' && 'Наличные', method === 'card' && 'Карта', method === 'transfer' && 'Перевод']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, method, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: [currentSale.items.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: calculateGifts,\n        className: \"w-full btn-secondary\",\n        children: [/*#__PURE__*/_jsxDEV(Calculator, {\n          className: \"w-4 h-4 mr-2 inline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u0438\\u0442\\u044C \\u0430\\u043A\\u0446\\u0438\\u0438\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: processSale,\n        disabled: currentSale.items.length === 0 || currentSale.photos.length === 0 || isProcessing,\n        className: \"w-full btn-honey disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: isProcessing ? 'Обработка...' : 'Оформить продажу'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), showCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-4 flex items-center justify-center\",\n          children: /*#__PURE__*/_jsxDEV(Camera, {\n            className: \"w-8 h-8 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u0418\\u043C\\u0438\\u0442\\u0430\\u0446\\u0438\\u044F \\u043A\\u0430\\u043C\\u0435\\u0440\\u044B...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n};\n_s(SalesPage, \"r+BGn6MfphajOW+dwLIaRrjZdd0=\", false, function () {\n  return [useAuth, useData];\n});\n_c = SalesPage;\nexport default SalesPage;\nvar _c;\n$RefreshReg$(_c, \"SalesPage\");","map":{"version":3,"names":["React","useState","useAuth","useData","UserRole","ShoppingCart","Plus","Minus","Camera","CheckCircle","AlertTriangle","Gift","Calculator","jsxDEV","_jsxDEV","SalesPage","_s","user","hasRole","products","inventory","addSale","promotions","currentSale","setCurrentSale","items","gifts","paymentMethod","customerInfo","photos","showCamera","setShowCamera","isProcessing","setIsProcessing","availableProducts","filter","product","inv","find","i","locationId","productId","id","currentStock","isActive","addToCart","p","existingItem","item","prev","map","quantity","totalPrice","unitPrice","newItem","basePrice","updateQuantity","calculateGifts","newGifts","forEach","promotion","conditions","condition","minQuantity","gift","push","reason","name","takePhoto","setTimeout","mockPhoto","Date","now","processSale","length","alert","Promise","resolve","totalAmount","reduce","sum","newSale","promoterId","timestamp","isVerified","notes","ADMIN","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isLowStock","minStock","description","unit","toFixed","onClick","index","photo","method","type","value","checked","onChange","e","target","disabled","_c","$RefreshReg$"],"sources":["/Users/nikitaognev/Desktop/honey/src/pages/SalesPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useData } from '../context/DataContext';\nimport { UserRole, Sale, SaleItem, GiftItem } from '../types';\nimport { \n  ShoppingCart, \n  Plus, \n  Minus, \n  Camera, \n  CheckCircle, \n  AlertTriangle,\n  Gift,\n  Calculator,\n  Scale\n} from 'lucide-react';\n\nconst SalesPage: React.FC = () => {\n  const { user, hasRole } = useAuth();\n  const { products, inventory, addSale, promotions } = useData();\n  const [currentSale, setCurrentSale] = useState<{\n    items: SaleItem[];\n    gifts: GiftItem[];\n    paymentMethod: 'cash' | 'card' | 'transfer';\n    customerInfo: { name?: string; phone?: string };\n    photos: string[];\n    notes?: string;\n  }>({\n    items: [],\n    gifts: [],\n    paymentMethod: 'cash',\n    customerInfo: {},\n    photos: [],\n  });\n\n  const [showCamera, setShowCamera] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Получаем товары доступные на текущей точке\n  const availableProducts = products.filter(product => {\n    const inv = inventory.find(i => \n      i.locationId === user?.locationId && \n      i.productId === product.id && \n      i.currentStock > 0\n    );\n    return inv && product.isActive;\n  });\n\n  const addToCart = (productId: string) => {\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n\n    const existingItem = currentSale.items.find(item => item.productId === productId);\n    \n    if (existingItem) {\n      setCurrentSale(prev => ({\n        ...prev,\n        items: prev.items.map(item =>\n          item.productId === productId\n            ? { ...item, quantity: item.quantity + 0.1, totalPrice: (item.quantity + 0.1) * item.unitPrice }\n            : item\n        )\n      }));\n    } else {\n      const newItem: SaleItem = {\n        productId,\n        quantity: 0.1,\n        unitPrice: product.basePrice,\n        totalPrice: product.basePrice * 0.1,\n      };\n      setCurrentSale(prev => ({\n        ...prev,\n        items: [...prev.items, newItem]\n      }));\n    }\n  };\n\n  const updateQuantity = (productId: string, quantity: number) => {\n    if (quantity <= 0) {\n      setCurrentSale(prev => ({\n        ...prev,\n        items: prev.items.filter(item => item.productId !== productId)\n      }));\n      return;\n    }\n\n    setCurrentSale(prev => ({\n      ...prev,\n      items: prev.items.map(item =>\n        item.productId === productId\n          ? { ...item, quantity, totalPrice: quantity * item.unitPrice }\n          : item\n      )\n    }));\n  };\n\n  const calculateGifts = () => {\n    const newGifts: GiftItem[] = [];\n    \n    promotions.forEach(promotion => {\n      if (!promotion.isActive) return;\n      \n      promotion.conditions.forEach(condition => {\n        const item = currentSale.items.find(i => i.productId === condition.productId);\n        if (item && item.quantity >= condition.minQuantity) {\n          promotion.gifts.forEach(gift => {\n            newGifts.push({\n              productId: gift.productId,\n              quantity: gift.quantity,\n              reason: `Акция: ${promotion.name}`\n            });\n          });\n        }\n      });\n    });\n    \n    setCurrentSale(prev => ({ ...prev, gifts: newGifts }));\n  };\n\n  const takePhoto = () => {\n    setShowCamera(true);\n    // В реальном приложении здесь будет работа с камерой\n    setTimeout(() => {\n      const mockPhoto = `photo_${Date.now()}.jpg`;\n      setCurrentSale(prev => ({\n        ...prev,\n        photos: [...prev.photos, mockPhoto]\n      }));\n      setShowCamera(false);\n    }, 1000);\n  };\n\n  const processSale = async () => {\n    if (currentSale.items.length === 0) return;\n    if (currentSale.photos.length === 0) {\n      alert('Необходимо сделать фото товара!');\n      return;\n    }\n\n    setIsProcessing(true);\n    \n    // Имитация обработки\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    const totalAmount = currentSale.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    \n    const newSale: Omit<Sale, 'id'> = {\n      locationId: user?.locationId || 'loc1',\n      promoterId: user?.id || '',\n      items: currentSale.items,\n      totalAmount,\n      paymentMethod: currentSale.paymentMethod,\n      customerInfo: currentSale.customerInfo,\n      gifts: currentSale.gifts,\n      photos: currentSale.photos,\n      timestamp: new Date(),\n      isVerified: false,\n      notes: currentSale.notes,\n    };\n\n    addSale(newSale);\n    \n    // Сброс формы\n    setCurrentSale({\n      items: [],\n      gifts: [],\n      paymentMethod: 'cash',\n      customerInfo: {},\n      photos: [],\n    });\n    \n    setIsProcessing(false);\n    alert('Продажа успешно оформлена!');\n  };\n\n  const totalAmount = currentSale.items.reduce((sum, item) => sum + item.totalPrice, 0);\n\n  if (hasRole(UserRole.ADMIN)) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"card\">\n          <h1 className=\"text-xl font-semibold mb-4\">Продажи</h1>\n          <p className=\"text-gray-600\">Просмотр всех продаж системы</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Заголовок */}\n      <div className=\"card bg-gradient-to-r from-honey-500 to-honey-600 text-white\">\n        <h1 className=\"text-xl font-semibold mb-2\">Новая продажа</h1>\n        <p className=\"text-honey-100\">Выберите товары и оформите продажу</p>\n      </div>\n\n      {/* Товары */}\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold mb-4\">Доступные товары</h2>\n        <div className=\"grid grid-cols-2 gap-3\">\n          {availableProducts.map(product => {\n            const inv = inventory.find(i => \n              i.locationId === user?.locationId && i.productId === product.id\n            );\n            const isLowStock = inv && inv.currentStock <= inv.minStock;\n            \n            return (\n              <div \n                key={product.id}\n                className={`p-3 rounded-lg border-2 ${\n                  isLowStock ? 'border-red-200 bg-red-50' : 'border-gray-200 bg-white'\n                }`}\n              >\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"font-medium text-sm\">{product.name}</h3>\n                  {isLowStock && <AlertTriangle className=\"w-4 h-4 text-red-500\" />}\n                </div>\n                <p className=\"text-xs text-gray-600 mb-2\">{product.description}</p>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-semibold\">{product.basePrice} ₽/{product.unit}</span>\n                  <span className=\"text-xs text-gray-500\">\n                    Остаток: {inv?.currentStock.toFixed(1)} {product.unit}\n                  </span>\n                </div>\n                <button\n                  onClick={() => addToCart(product.id)}\n                  className=\"w-full btn-honey text-sm py-1\"\n                >\n                  Добавить\n                </button>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Корзина */}\n      {currentSale.items.length > 0 && (\n        <div className=\"card\">\n          <h2 className=\"text-lg font-semibold mb-4 flex items-center\">\n            <ShoppingCart className=\"w-5 h-5 mr-2\" />\n            Корзина\n          </h2>\n          \n          <div className=\"space-y-3\">\n            {currentSale.items.map(item => {\n              const product = products.find(p => p.id === item.productId);\n              if (!product) return null;\n              \n              return (\n                <div key={item.productId} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-medium\">{product.name}</h3>\n                    <p className=\"text-sm text-gray-600\">{item.unitPrice} ₽/{product.unit}</p>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => updateQuantity(item.productId, item.quantity - 0.1)}\n                      className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\"\n                    >\n                      <Minus className=\"w-4 h-4\" />\n                    </button>\n                    \n                    <div className=\"text-center min-w-[60px]\">\n                      <div className=\"font-medium\">{item.quantity.toFixed(1)} {product.unit}</div>\n                      <div className=\"text-sm text-gray-600\">{item.totalPrice.toFixed(0)} ₽</div>\n                    </div>\n                    \n                    <button\n                      onClick={() => updateQuantity(item.productId, item.quantity + 0.1)}\n                      className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\"\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Подарки */}\n          {currentSale.gifts.length > 0 && (\n            <div className=\"mt-4 p-3 bg-green-50 rounded-lg\">\n              <h3 className=\"font-medium text-green-800 mb-2 flex items-center\">\n                <Gift className=\"w-4 h-4 mr-1\" />\n                Подарки\n              </h3>\n              {currentSale.gifts.map((gift, index) => {\n                const product = products.find(p => p.id === gift.productId);\n                return (\n                  <div key={index} className=\"text-sm text-green-700\">\n                    {product?.name} - {gift.quantity} {product?.unit} ({gift.reason})\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          {/* Итого */}\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-lg font-semibold\">Итого:</span>\n              <span className=\"text-xl font-bold text-green-600\">{totalAmount.toFixed(0)} ₽</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Фото товара */}\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold mb-4 flex items-center\">\n          <Camera className=\"w-5 h-5 mr-2\" />\n          Фото товара (обязательно)\n        </h2>\n        \n        {currentSale.photos.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Camera className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600 mb-4\">Сделайте фото товара для контроля качества</p>\n            <button\n              onClick={takePhoto}\n              className=\"btn-primary\"\n            >\n              Сделать фото\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {currentSale.photos.map((photo, index) => (\n              <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                <div className=\"flex items-center\">\n                  <CheckCircle className=\"w-5 h-5 text-green-500 mr-2\" />\n                  <span className=\"text-sm\">Фото {index + 1}</span>\n                </div>\n                <span className=\"text-xs text-gray-500\">{photo}</span>\n              </div>\n            ))}\n            <button\n              onClick={takePhoto}\n              className=\"w-full btn-secondary\"\n            >\n              Добавить еще фото\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Способ оплаты */}\n      <div className=\"card\">\n        <h2 className=\"text-lg font-semibold mb-4\">Способ оплаты</h2>\n        <div className=\"space-y-2\">\n          {(['cash', 'card', 'transfer'] as const).map(method => (\n            <label key={method} className=\"flex items-center\">\n              <input\n                type=\"radio\"\n                name=\"payment\"\n                value={method}\n                checked={currentSale.paymentMethod === method}\n                onChange={(e) => setCurrentSale(prev => ({ \n                  ...prev, \n                  paymentMethod: e.target.value as 'cash' | 'card' | 'transfer' \n                }))}\n                className=\"mr-3\"\n              />\n              <span>\n                {method === 'cash' && 'Наличные'}\n                {method === 'card' && 'Карта'}\n                {method === 'transfer' && 'Перевод'}\n              </span>\n            </label>\n          ))}\n        </div>\n      </div>\n\n      {/* Кнопки действий */}\n      <div className=\"space-y-3\">\n        {currentSale.items.length > 0 && (\n          <button\n            onClick={calculateGifts}\n            className=\"w-full btn-secondary\"\n          >\n            <Calculator className=\"w-4 h-4 mr-2 inline\" />\n            Проверить акции\n          </button>\n        )}\n        \n        <button\n          onClick={processSale}\n          disabled={currentSale.items.length === 0 || currentSale.photos.length === 0 || isProcessing}\n          className=\"w-full btn-honey disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {isProcessing ? 'Обработка...' : 'Оформить продажу'}\n        </button>\n      </div>\n\n      {/* Камера (имитация) */}\n      {showCamera && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 text-center\">\n            <div className=\"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-4 flex items-center justify-center\">\n              <Camera className=\"w-8 h-8 text-gray-600\" />\n            </div>\n            <p className=\"text-gray-600\">Имитация камеры...</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SalesPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}