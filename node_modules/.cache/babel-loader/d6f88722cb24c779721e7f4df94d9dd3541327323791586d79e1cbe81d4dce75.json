{"ast":null,"code":"var _jsxFileName = \"/Users/nikitaognev/Desktop/honey/src/pages/PromotionsPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useData } from '../context/DataContext';\nimport { UserRole } from '../types';\nimport { Gift, Plus, Edit, Trash2, Calendar, Percent, ShoppingCart, CheckCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PromotionsPage = () => {\n  _s();\n  const {\n    user,\n    hasRole\n  } = useAuth();\n  const {\n    promotions,\n    products,\n    locations,\n    addPromotion\n  } = useData();\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [editingPromotion, setEditingPromotion] = useState(null);\n  const [newPromotion, setNewPromotion] = useState({\n    name: '',\n    description: '',\n    type: 'buy_x_get_y',\n    conditions: [],\n    gifts: [],\n    isActive: true,\n    startDate: new Date().toISOString().split('T')[0],\n    locations: []\n  });\n\n  // Только администратор может управлять акциями\n  if (!hasRole(UserRole.ADMIN)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"\\u0410\\u043A\\u0446\\u0438\\u0438 \\u0438 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F \\u0437\\u0430\\u043F\\u0440\\u0435\\u0449\\u0435\\u043D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n  const addCondition = () => {\n    setNewPromotion(prev => {\n      var _products$;\n      return {\n        ...prev,\n        conditions: [...prev.conditions, {\n          productId: ((_products$ = products[0]) === null || _products$ === void 0 ? void 0 : _products$.id) || '',\n          minQuantity: 1,\n          minAmount: undefined\n        }]\n      };\n    });\n  };\n  const updateCondition = (index, field, value) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      conditions: prev.conditions.map((condition, i) => i === index ? {\n        ...condition,\n        [field]: value\n      } : condition)\n    }));\n  };\n  const removeCondition = index => {\n    setNewPromotion(prev => ({\n      ...prev,\n      conditions: prev.conditions.filter((_, i) => i !== index)\n    }));\n  };\n  const addGift = () => {\n    setNewPromotion(prev => {\n      var _products$2;\n      return {\n        ...prev,\n        gifts: [...prev.gifts, {\n          productId: ((_products$2 = products[0]) === null || _products$2 === void 0 ? void 0 : _products$2.id) || '',\n          quantity: 1,\n          maxUses: undefined\n        }]\n      };\n    });\n  };\n  const updateGift = (index, field, value) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      gifts: prev.gifts.map((gift, i) => i === index ? {\n        ...gift,\n        [field]: value\n      } : gift)\n    }));\n  };\n  const removeGift = index => {\n    setNewPromotion(prev => ({\n      ...prev,\n      gifts: prev.gifts.filter((_, i) => i !== index)\n    }));\n  };\n  const createPromotion = () => {\n    if (!newPromotion.name || newPromotion.conditions.length === 0) {\n      alert('Заполните название и условия акции');\n      return;\n    }\n    const promotion = {\n      name: newPromotion.name,\n      description: newPromotion.description,\n      type: newPromotion.type,\n      conditions: newPromotion.conditions,\n      gifts: newPromotion.gifts,\n      isActive: newPromotion.isActive,\n      startDate: new Date(newPromotion.startDate),\n      endDate: newPromotion.endDate ? new Date(newPromotion.endDate) : undefined,\n      locations: newPromotion.locations\n    };\n    addPromotion(promotion);\n    setShowCreateForm(false);\n    setNewPromotion({\n      name: '',\n      description: '',\n      type: 'buy_x_get_y',\n      conditions: [],\n      gifts: [],\n      isActive: true,\n      startDate: new Date().toISOString().split('T')[0],\n      locations: []\n    });\n    alert('Акция успешно создана!');\n  };\n  const getPromotionTypeIcon = type => {\n    switch (type) {\n      case 'buy_x_get_y':\n        return /*#__PURE__*/_jsxDEV(Gift, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 34\n        }, this);\n      case 'discount':\n        return /*#__PURE__*/_jsxDEV(Percent, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 31\n        }, this);\n      case 'gift':\n        return /*#__PURE__*/_jsxDEV(ShoppingCart, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 27\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Gift, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  const getPromotionTypeText = type => {\n    switch (type) {\n      case 'buy_x_get_y':\n        return 'Покупка X - подарок Y';\n      case 'discount':\n        return 'Скидка';\n      case 'gift':\n        return 'Подарок';\n      default:\n        return 'Акция';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card bg-gradient-to-r from-honey-500 to-honey-600 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold mb-2\",\n            children: \"\\u0410\\u043A\\u0446\\u0438\\u0438 \\u0438 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-honey-100\",\n            children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0430\\u043A\\u0446\\u0438\\u044F\\u043C\\u0438 \\u0438 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430\\u043C\\u0438 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u043E\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateForm(true),\n          className: \"btn-secondary\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0430\\u043A\\u0446\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0430\\u043A\\u0446\\u0438\\u0439\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: promotions.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Gift, {\n            className: \"w-8 h-8 text-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: promotions.filter(p => p.isActive).length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: \"w-8 h-8 text-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: promotions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(Gift, {\n          className: \"w-12 h-12 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u0410\\u043A\\u0446\\u0438\\u0439 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateForm(true),\n          className: \"btn-primary mt-4\",\n          children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0435\\u0440\\u0432\\u0443\\u044E \\u0430\\u043A\\u0446\\u0438\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this) : promotions.map(promotion => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [getPromotionTypeIcon(promotion.type), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold\",\n                children: promotion.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: getPromotionTypeText(promotion.type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: promotion.isActive ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\",\n              children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full\",\n              children: \"\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 mb-4\",\n          children: promotion.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-2\",\n            children: \"\\u0423\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: promotion.conditions.map((condition, index) => {\n              const product = products.find(p => p.id === condition.productId);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm bg-gray-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: product === null || product === void 0 ? void 0 : product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: [' ', \"\\u043E\\u0442 \", condition.minQuantity, \" \", product === null || product === void 0 ? void 0 : product.unit, condition.minAmount && ` или от ${condition.minAmount} ₽`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 15\n        }, this), promotion.gifts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-2\",\n            children: \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: promotion.gifts.map((gift, index) => {\n              const product = products.find(p => p.id === gift.productId);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm bg-green-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-green-800\",\n                  children: product === null || product === void 0 ? void 0 : product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-green-600\",\n                  children: [' ', \"- \", gift.quantity, \" \", product === null || product === void 0 ? void 0 : product.unit, gift.maxUses && ` (макс. ${gift.maxUses} раз)`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-2\",\n            children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043D\\u0430 \\u0442\\u043E\\u0447\\u043A\\u0430\\u0445:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: promotion.locations.map(locationId => {\n              const location = locations.find(l => l.id === locationId);\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded\",\n                children: location === null || location === void 0 ? void 0 : location.name\n              }, locationId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between text-sm text-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"w-4 h-4 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u0421 \", promotion.startDate.toLocaleDateString('ru-RU'), promotion.endDate && ` по ${promotion.endDate.toLocaleDateString('ru-RU')}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setEditingPromotion(promotion),\n              className: \"text-blue-600 hover:text-blue-800\",\n              children: /*#__PURE__*/_jsxDEV(Edit, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-red-600 hover:text-red-800\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }, this)]\n      }, promotion.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), showCreateForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold mb-4\",\n          children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0430\\u043A\\u0446\\u0438\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0430\\u043A\\u0446\\u0438\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newPromotion.name,\n              onChange: e => setNewPromotion(prev => ({\n                ...prev,\n                name: e.target.value\n              })),\n              className: \"input-field\",\n              placeholder: \"\\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440: \\u041F\\u0440\\u0438 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0435 2 \\u043A\\u0433 \\u043C\\u0435\\u0434\\u0430 - \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A 0.5 \\u043A\\u0433\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: newPromotion.description,\n              onChange: e => setNewPromotion(prev => ({\n                ...prev,\n                description: e.target.value\n              })),\n              className: \"input-field\",\n              rows: 3,\n              placeholder: \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u043E\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0430\\u043A\\u0446\\u0438\\u0438...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0422\\u0438\\u043F \\u0430\\u043A\\u0446\\u0438\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: newPromotion.type,\n              onChange: e => setNewPromotion(prev => ({\n                ...prev,\n                type: e.target.value\n              })),\n              className: \"input-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"buy_x_get_y\",\n                children: \"\\u041F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0430 X - \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A Y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"discount\",\n                children: \"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"gift\",\n                children: \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium\",\n              children: \"\\u0423\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F \\u0430\\u043A\\u0446\\u0438\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addCondition,\n              className: \"btn-secondary text-sm py-1 px-3\",\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                className: \"w-4 h-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this), \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u0435\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: newPromotion.conditions.map((condition, index) => {\n              var _products$find;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: condition.productId,\n                  onChange: e => updateCondition(index, 'productId', e.target.value),\n                  className: \"flex-1 input-field text-sm\",\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: product.id,\n                    children: product.name\n                  }, product.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: condition.minQuantity,\n                  onChange: e => updateCondition(index, 'minQuantity', parseFloat(e.target.value) || 0),\n                  step: \"0.1\",\n                  min: \"0\",\n                  className: \"w-20 input-field text-sm text-center\",\n                  placeholder: \"\\u041A\\u043E\\u043B-\\u0432\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600 min-w-[40px]\",\n                  children: (_products$find = products.find(p => p.id === condition.productId)) === null || _products$find === void 0 ? void 0 : _products$find.unit\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeCondition(index),\n                  className: \"text-red-500 hover:text-red-700\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium\",\n              children: \"\\u041F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addGift,\n              className: \"btn-secondary text-sm py-1 px-3\",\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                className: \"w-4 h-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u0430\\u0440\\u043E\\u043A\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: newPromotion.gifts.map((gift, index) => {\n              var _products$find2;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 p-3 bg-green-50 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: gift.productId,\n                  onChange: e => updateGift(index, 'productId', e.target.value),\n                  className: \"flex-1 input-field text-sm\",\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: product.id,\n                    children: product.name\n                  }, product.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: gift.quantity,\n                  onChange: e => updateGift(index, 'quantity', parseFloat(e.target.value) || 0),\n                  step: \"0.1\",\n                  min: \"0\",\n                  className: \"w-20 input-field text-sm text-center\",\n                  placeholder: \"\\u041A\\u043E\\u043B-\\u0432\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600 min-w-[40px]\",\n                  children: (_products$find2 = products.find(p => p.id === gift.productId)) === null || _products$find2 === void 0 ? void 0 : _products$find2.unit\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeGift(index),\n                  className: \"text-red-500 hover:text-red-700\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium mb-3\",\n            children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u043D\\u0430 \\u0442\\u043E\\u0447\\u043A\\u0430\\u0445\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: locations.map(location => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: newPromotion.locations.includes(location.id),\n                onChange: e => {\n                  if (e.target.checked) {\n                    setNewPromotion(prev => ({\n                      ...prev,\n                      locations: [...prev.locations, location.id]\n                    }));\n                  } else {\n                    setNewPromotion(prev => ({\n                      ...prev,\n                      locations: prev.locations.filter(id => id !== location.id)\n                    }));\n                  }\n                },\n                className: \"mr-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm\",\n                children: location.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 21\n              }, this)]\n            }, location.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: newPromotion.startDate,\n              onChange: e => setNewPromotion(prev => ({\n                ...prev,\n                startDate: e.target.value\n              })),\n              className: \"input-field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F (\\u043D\\u0435\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: newPromotion.endDate || '',\n              onChange: e => setNewPromotion(prev => ({\n                ...prev,\n                endDate: e.target.value\n              })),\n              className: \"input-field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowCreateForm(false),\n            className: \"flex-1 btn-secondary\",\n            children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: createPromotion,\n            disabled: !newPromotion.name || newPromotion.conditions.length === 0,\n            className: \"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0430\\u043A\\u0446\\u0438\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n};\n_s(PromotionsPage, \"lvgEjZuG6wmH4ZiD88NPLs0hQEM=\", false, function () {\n  return [useAuth, useData];\n});\n_c = PromotionsPage;\nexport default PromotionsPage;\nvar _c;\n$RefreshReg$(_c, \"PromotionsPage\");","map":{"version":3,"names":["React","useState","useAuth","useData","UserRole","Gift","Plus","Edit","Trash2","Calendar","Percent","ShoppingCart","CheckCircle","jsxDEV","_jsxDEV","PromotionsPage","_s","user","hasRole","promotions","products","locations","addPromotion","showCreateForm","setShowCreateForm","editingPromotion","setEditingPromotion","newPromotion","setNewPromotion","name","description","type","conditions","gifts","isActive","startDate","Date","toISOString","split","ADMIN","className","children","fileName","_jsxFileName","lineNumber","columnNumber","addCondition","prev","_products$","productId","id","minQuantity","minAmount","undefined","updateCondition","index","field","value","map","condition","i","removeCondition","filter","_","addGift","_products$2","quantity","maxUses","updateGift","gift","removeGift","createPromotion","length","alert","promotion","endDate","getPromotionTypeIcon","getPromotionTypeText","onClick","p","product","find","unit","locationId","location","l","toLocaleDateString","onChange","e","target","placeholder","rows","_products$find","parseFloat","step","min","_products$find2","checked","includes","disabled","_c","$RefreshReg$"],"sources":["/Users/nikitaognev/Desktop/honey/src/pages/PromotionsPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useData } from '../context/DataContext';\nimport { UserRole, Promotion, Product, Location } from '../types';\nimport { \n  Gift, \n  Plus, \n  Edit, \n  Trash2, \n  Calendar,\n  MapPin,\n  Percent,\n  ShoppingCart,\n  AlertCircle,\n  CheckCircle\n} from 'lucide-react';\n\nconst PromotionsPage: React.FC = () => {\n  const { user, hasRole } = useAuth();\n  const { \n    promotions, \n    products, \n    locations, \n    addPromotion \n  } = useData();\n  \n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [editingPromotion, setEditingPromotion] = useState<Promotion | null>(null);\n  const [newPromotion, setNewPromotion] = useState<{\n    name: string;\n    description: string;\n    type: 'buy_x_get_y' | 'discount' | 'gift';\n    conditions: Array<{\n      productId: string;\n      minQuantity: number;\n      minAmount?: number;\n    }>;\n    gifts: Array<{\n      productId: string;\n      quantity: number;\n      maxUses?: number;\n    }>;\n    isActive: boolean;\n    startDate: string;\n    endDate?: string;\n    locations: string[];\n  }>({\n    name: '',\n    description: '',\n    type: 'buy_x_get_y',\n    conditions: [],\n    gifts: [],\n    isActive: true,\n    startDate: new Date().toISOString().split('T')[0],\n    locations: [],\n  });\n\n  // Только администратор может управлять акциями\n  if (!hasRole(UserRole.ADMIN)) {\n    return (\n      <div className=\"card\">\n        <h1 className=\"text-xl font-semibold mb-4\">Акции и подарки</h1>\n        <p className=\"text-gray-600\">Доступ запрещен</p>\n      </div>\n    );\n  }\n\n  const addCondition = () => {\n    setNewPromotion(prev => ({\n      ...prev,\n      conditions: [...prev.conditions, {\n        productId: products[0]?.id || '',\n        minQuantity: 1,\n        minAmount: undefined,\n      }]\n    }));\n  };\n\n  const updateCondition = (index: number, field: string, value: any) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      conditions: prev.conditions.map((condition, i) => \n        i === index ? { ...condition, [field]: value } : condition\n      )\n    }));\n  };\n\n  const removeCondition = (index: number) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      conditions: prev.conditions.filter((_, i) => i !== index)\n    }));\n  };\n\n  const addGift = () => {\n    setNewPromotion(prev => ({\n      ...prev,\n      gifts: [...prev.gifts, {\n        productId: products[0]?.id || '',\n        quantity: 1,\n        maxUses: undefined,\n      }]\n    }));\n  };\n\n  const updateGift = (index: number, field: string, value: any) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      gifts: prev.gifts.map((gift, i) => \n        i === index ? { ...gift, [field]: value } : gift\n      )\n    }));\n  };\n\n  const removeGift = (index: number) => {\n    setNewPromotion(prev => ({\n      ...prev,\n      gifts: prev.gifts.filter((_, i) => i !== index)\n    }));\n  };\n\n  const createPromotion = () => {\n    if (!newPromotion.name || newPromotion.conditions.length === 0) {\n      alert('Заполните название и условия акции');\n      return;\n    }\n\n    const promotion: Omit<Promotion, 'id'> = {\n      name: newPromotion.name,\n      description: newPromotion.description,\n      type: newPromotion.type,\n      conditions: newPromotion.conditions,\n      gifts: newPromotion.gifts,\n      isActive: newPromotion.isActive,\n      startDate: new Date(newPromotion.startDate),\n      endDate: newPromotion.endDate ? new Date(newPromotion.endDate) : undefined,\n      locations: newPromotion.locations,\n    };\n\n    addPromotion(promotion);\n    setShowCreateForm(false);\n    setNewPromotion({\n      name: '',\n      description: '',\n      type: 'buy_x_get_y',\n      conditions: [],\n      gifts: [],\n      isActive: true,\n      startDate: new Date().toISOString().split('T')[0],\n      locations: [],\n    });\n    alert('Акция успешно создана!');\n  };\n\n  const getPromotionTypeIcon = (type: string) => {\n    switch (type) {\n      case 'buy_x_get_y': return <Gift className=\"w-4 h-4\" />;\n      case 'discount': return <Percent className=\"w-4 h-4\" />;\n      case 'gift': return <ShoppingCart className=\"w-4 h-4\" />;\n      default: return <Gift className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getPromotionTypeText = (type: string) => {\n    switch (type) {\n      case 'buy_x_get_y': return 'Покупка X - подарок Y';\n      case 'discount': return 'Скидка';\n      case 'gift': return 'Подарок';\n      default: return 'Акция';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Заголовок */}\n      <div className=\"card bg-gradient-to-r from-honey-500 to-honey-600 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-xl font-semibold mb-2\">Акции и подарки</h1>\n            <p className=\"text-honey-100\">Управление акциями и системами подарков</p>\n          </div>\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"btn-secondary\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Новая акция\n          </button>\n        </div>\n      </div>\n\n      {/* Статистика */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Всего акций</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{promotions.length}</p>\n            </div>\n            <Gift className=\"w-8 h-8 text-blue-500\" />\n          </div>\n        </div>\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Активные</p>\n              <p className=\"text-2xl font-bold text-green-600\">\n                {promotions.filter(p => p.isActive).length}\n              </p>\n            </div>\n            <CheckCircle className=\"w-8 h-8 text-green-500\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Список акций */}\n      <div className=\"space-y-4\">\n        {promotions.length === 0 ? (\n          <div className=\"card text-center py-8\">\n            <Gift className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600\">Акций пока нет</p>\n            <button\n              onClick={() => setShowCreateForm(true)}\n              className=\"btn-primary mt-4\"\n            >\n              Создать первую акцию\n            </button>\n          </div>\n        ) : (\n          promotions.map(promotion => (\n            <div key={promotion.id} className=\"card\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center\">\n                  {getPromotionTypeIcon(promotion.type)}\n                  <div className=\"ml-3\">\n                    <h3 className=\"font-semibold\">{promotion.name}</h3>\n                    <p className=\"text-sm text-gray-600\">\n                      {getPromotionTypeText(promotion.type)}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {promotion.isActive ? (\n                    <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                      Активна\n                    </span>\n                  ) : (\n                    <span className=\"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full\">\n                      Неактивна\n                    </span>\n                  )}\n                </div>\n              </div>\n              \n              <p className=\"text-sm text-gray-600 mb-4\">{promotion.description}</p>\n              \n              {/* Условия */}\n              <div className=\"mb-4\">\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Условия:</h4>\n                <div className=\"space-y-2\">\n                  {promotion.conditions.map((condition, index) => {\n                    const product = products.find(p => p.id === condition.productId);\n                    return (\n                      <div key={index} className=\"text-sm bg-gray-50 p-2 rounded\">\n                        <span className=\"font-medium\">{product?.name}</span>\n                        <span className=\"text-gray-600\">\n                          {' '}от {condition.minQuantity} {product?.unit}\n                          {condition.minAmount && ` или от ${condition.minAmount} ₽`}\n                        </span>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n              \n              {/* Подарки */}\n              {promotion.gifts.length > 0 && (\n                <div className=\"mb-4\">\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Подарки:</h4>\n                  <div className=\"space-y-2\">\n                    {promotion.gifts.map((gift, index) => {\n                      const product = products.find(p => p.id === gift.productId);\n                      return (\n                        <div key={index} className=\"text-sm bg-green-50 p-2 rounded\">\n                          <span className=\"font-medium text-green-800\">{product?.name}</span>\n                          <span className=\"text-green-600\">\n                            {' '}- {gift.quantity} {product?.unit}\n                            {gift.maxUses && ` (макс. ${gift.maxUses} раз)`}\n                          </span>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n              \n              {/* Локации */}\n              <div className=\"mb-4\">\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Действует на точках:</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {promotion.locations.map(locationId => {\n                    const location = locations.find(l => l.id === locationId);\n                    return (\n                      <span key={locationId} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded\">\n                        {location?.name}\n                      </span>\n                    );\n                  })}\n                </div>\n              </div>\n              \n              {/* Даты */}\n              <div className=\"flex items-center justify-between text-sm text-gray-600\">\n                <div className=\"flex items-center\">\n                  <Calendar className=\"w-4 h-4 mr-1\" />\n                  <span>\n                    С {promotion.startDate.toLocaleDateString('ru-RU')}\n                    {promotion.endDate && ` по ${promotion.endDate.toLocaleDateString('ru-RU')}`}\n                  </span>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => setEditingPromotion(promotion)}\n                    className=\"text-blue-600 hover:text-blue-800\"\n                  >\n                    <Edit className=\"w-4 h-4\" />\n                  </button>\n                  <button className=\"text-red-600 hover:text-red-800\">\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Модальное окно создания акции */}\n      {showCreateForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n            <h3 className=\"text-lg font-semibold mb-4\">Создать акцию</h3>\n            \n            {/* Основная информация */}\n            <div className=\"space-y-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Название акции\n                </label>\n                <input\n                  type=\"text\"\n                  value={newPromotion.name}\n                  onChange={(e) => setNewPromotion(prev => ({ ...prev, name: e.target.value }))}\n                  className=\"input-field\"\n                  placeholder=\"Например: При покупке 2 кг меда - подарок 0.5 кг\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Описание\n                </label>\n                <textarea\n                  value={newPromotion.description}\n                  onChange={(e) => setNewPromotion(prev => ({ ...prev, description: e.target.value }))}\n                  className=\"input-field\"\n                  rows={3}\n                  placeholder=\"Подробное описание акции...\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Тип акции\n                </label>\n                <select\n                  value={newPromotion.type}\n                  onChange={(e) => setNewPromotion(prev => ({ \n                    ...prev, \n                    type: e.target.value as 'buy_x_get_y' | 'discount' | 'gift' \n                  }))}\n                  className=\"input-field\"\n                >\n                  <option value=\"buy_x_get_y\">Покупка X - подарок Y</option>\n                  <option value=\"discount\">Скидка</option>\n                  <option value=\"gift\">Подарок</option>\n                </select>\n              </div>\n            </div>\n            \n            {/* Условия */}\n            <div className=\"mb-6\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"font-medium\">Условия акции</h4>\n                <button\n                  onClick={addCondition}\n                  className=\"btn-secondary text-sm py-1 px-3\"\n                >\n                  <Plus className=\"w-4 h-4 mr-1\" />\n                  Добавить условие\n                </button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {newPromotion.conditions.map((condition, index) => (\n                  <div key={index} className=\"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg\">\n                    <select\n                      value={condition.productId}\n                      onChange={(e) => updateCondition(index, 'productId', e.target.value)}\n                      className=\"flex-1 input-field text-sm\"\n                    >\n                      {products.map(product => (\n                        <option key={product.id} value={product.id}>\n                          {product.name}\n                        </option>\n                      ))}\n                    </select>\n                    \n                    <input\n                      type=\"number\"\n                      value={condition.minQuantity}\n                      onChange={(e) => updateCondition(index, 'minQuantity', parseFloat(e.target.value) || 0)}\n                      step=\"0.1\"\n                      min=\"0\"\n                      className=\"w-20 input-field text-sm text-center\"\n                      placeholder=\"Кол-во\"\n                    />\n                    \n                    <span className=\"text-sm text-gray-600 min-w-[40px]\">\n                      {products.find(p => p.id === condition.productId)?.unit}\n                    </span>\n                    \n                    <button\n                      onClick={() => removeCondition(index)}\n                      className=\"text-red-500 hover:text-red-700\"\n                    >\n                      ×\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Подарки */}\n            <div className=\"mb-6\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"font-medium\">Подарки</h4>\n                <button\n                  onClick={addGift}\n                  className=\"btn-secondary text-sm py-1 px-3\"\n                >\n                  <Plus className=\"w-4 h-4 mr-1\" />\n                  Добавить подарок\n                </button>\n              </div>\n              \n              <div className=\"space-y-3\">\n                {newPromotion.gifts.map((gift, index) => (\n                  <div key={index} className=\"flex items-center space-x-2 p-3 bg-green-50 rounded-lg\">\n                    <select\n                      value={gift.productId}\n                      onChange={(e) => updateGift(index, 'productId', e.target.value)}\n                      className=\"flex-1 input-field text-sm\"\n                    >\n                      {products.map(product => (\n                        <option key={product.id} value={product.id}>\n                          {product.name}\n                        </option>\n                      ))}\n                    </select>\n                    \n                    <input\n                      type=\"number\"\n                      value={gift.quantity}\n                      onChange={(e) => updateGift(index, 'quantity', parseFloat(e.target.value) || 0)}\n                      step=\"0.1\"\n                      min=\"0\"\n                      className=\"w-20 input-field text-sm text-center\"\n                      placeholder=\"Кол-во\"\n                    />\n                    \n                    <span className=\"text-sm text-gray-600 min-w-[40px]\">\n                      {products.find(p => p.id === gift.productId)?.unit}\n                    </span>\n                    \n                    <button\n                      onClick={() => removeGift(index)}\n                      className=\"text-red-500 hover:text-red-700\"\n                    >\n                      ×\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            {/* Локации */}\n            <div className=\"mb-6\">\n              <h4 className=\"font-medium mb-3\">Действует на точках</h4>\n              <div className=\"space-y-2\">\n                {locations.map(location => (\n                  <label key={location.id} className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={newPromotion.locations.includes(location.id)}\n                      onChange={(e) => {\n                        if (e.target.checked) {\n                          setNewPromotion(prev => ({\n                            ...prev,\n                            locations: [...prev.locations, location.id]\n                          }));\n                        } else {\n                          setNewPromotion(prev => ({\n                            ...prev,\n                            locations: prev.locations.filter(id => id !== location.id)\n                          }));\n                        }\n                      }}\n                      className=\"mr-3\"\n                    />\n                    <span className=\"text-sm\">{location.name}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n            \n            {/* Даты */}\n            <div className=\"grid grid-cols-2 gap-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Дата начала\n                </label>\n                <input\n                  type=\"date\"\n                  value={newPromotion.startDate}\n                  onChange={(e) => setNewPromotion(prev => ({ ...prev, startDate: e.target.value }))}\n                  className=\"input-field\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Дата окончания (необязательно)\n                </label>\n                <input\n                  type=\"date\"\n                  value={newPromotion.endDate || ''}\n                  onChange={(e) => setNewPromotion(prev => ({ ...prev, endDate: e.target.value }))}\n                  className=\"input-field\"\n                />\n              </div>\n            </div>\n            \n            {/* Кнопки */}\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => setShowCreateForm(false)}\n                className=\"flex-1 btn-secondary\"\n              >\n                Отмена\n              </button>\n              <button\n                onClick={createPromotion}\n                disabled={!newPromotion.name || newPromotion.conditions.length === 0}\n                className=\"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Создать акцию\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PromotionsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}